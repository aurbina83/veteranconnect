<div layout="row" layout-fill layout-align="center center" ng-show="vm.isLoading">
    <md-progress-circular md-mode="indeterminate" ng-show="vm.isLoading" class="md-primary md-hue-2" md-diameter="100"></md-progress-circular>
</div>
<div layout="column" layout-align="start center" layout-margin flex ng-show="vm.status._id == vm.event.eventCreator._id || vm.event.attending['_id'].indexOf(vm.status._id) !== -1">
  <md-card>
    <md-card-title layout-padding>
      <md-card-title-media>
        <div class="md-media-sm card-media">
          <img ng-src="{{vm.event.eventCreator.imgUrl}}" alt="{{vm.event.eventCreator.firstName}}" >
          <span class="md-subhead">{{vm.event.eventCreator.firstName}} {{vm.event.eventCreator.lastName}}</span>
        </div>
      </md-card-title-media>
      <md-card-title-text>
          <!-- Add event name/address/ change layout to look like "events" page -->
        <img ng-src="{{vm.event.eventCreator.branchImg}}" alt="{{vm.event.eventCreator.branch}}">

      </md-card-title-text>
    </md-card-title>
    <md-card-content layout-padding>
        <h3 class="md-headline" flex>{{vm.event.title}}</h3>
        <div layout="column" layout-gt-xs="row">
            <h3 class="md-subhead" flex>@ {{vm.event.name}}</h3>
            <span class="md-subhead">{{vm.event.dateTime | date:  'MMM d,  h:mm a' }}</span>
        </div>
        <div layout="column" layout-gt-sm="row">
            <span class="md-subhead" flex>{{vm.event.eventAddress}}</span>
            <span class="md-subhead">{{vm.event.city}}, {{vm.event.state}}</span>
        </div>
        <div layout="row">
            <span flex hide-sm hide-xs></span>
            <span class="md-body-1">{{vm.event.numGuests}} spots left</span>
        </div>
        <md-divider layout-margin></md-divider>
        <h3 class="md-subhead">
            Description:
        </h3>
      <p class="md-caption">
        {{vm.event.description}}
      </p>
    </md-card-content>
  </md-card>
</div>

<!-- COMMENTS -->
<div layout="row" layout-align="center center" layout-margin ng-show="vm.status._id == vm.event.eventCreator._id || vm.event.attending['_id'].indexOf(vm.status._id) !== -1">
  <form layout="column" ng-submit="vm.createComment()" flex-gt-sm="30" flex>
    <md-input-container>
      <label>Comment</label>
      <input ng-model="vm.comment.message">
    </md-input-container>
    <md-button type="submit" class="md-raised md-accent md-hue-3">
      Submit
    </md-button>
  </form>
</div>

<div layout="row" layout-margin layout-align="center start" ng-show="vm.status._id == vm.event.eventCreator._id || vm.event.attending['_id'].indexOf(vm.status._id) !== -1">
  <md-list flex-gt-sm="60" flex>
    <md-subheader class="md-no-sticky">Comments</md-subheader>
    <md-list-item class="md-2-line" ng-repeat="c in vm.event.comments" ng-click="null">
      <img ng-src="{{c.user.imgUrl}}" class="md-avatar" alt="{{c.user.firstName}}" />
      <div class="md-list-item-text" layout="column" flex>
        <h3>{{ c.user.firstName}} {{ c.user.lastName }}</h3>
        <h4>{{ c.message }}</h4>
        <p am-time-ago="c.datePosted"></p>
      </div>
      <md-divider></md-divider>
    </md-list-item>
  </md-list>
</div>
